<!DOCTYPE html>
<html lang="en">
    <head>
        <title>통나무 팬션</title>
        <meta charset="utf-8">

        <!-- jQuery / 항상 제일 먼저! -->
        <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>        

        <!-- bootstrap -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
        <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js" integrity="sha384-+YQ4JLhjyBLPDQt//I+STsc9iw4uQqACwlvpslubQzn4u2UU2UFM80nGisd026JF" crossorigin="anonymous"></script>
        
        <!-- datepicker-->
        <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
        <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
        
        <!-- css -->
        <link rel="stylesheet" type="text/css" href="quiz01_style.css">
    </head>
    <body>
        <div id="wrap">
            <!-- header -->
            <header class="d-flex align-items-center justify-content-center">
                <div>
                    <span class="icon-font font-weight-light">통나무 펜션</span>
                </div>
            </header>
            <!-- nav -->
            <nav>
                <ul class="nav nav-fill">
                    <li class="nav-item"><a href='#' class="nav-link font-weight-bold text-light">펜션소개</a></li>
                    <li class="nav-item"><a href="#" class="nav-link font-weight-bold text-light">객실보기</a></li>
                    <li class="nav-item"><a href="#" class="nav-link font-weight-bold text-light">예약안내</a></li>
                    <li class="nav-item"><a href="#" class="nav-link font-weight-bold text-light">커뮤니티</a></li>
                </ul>
            </nav>
            <!-- section -->
            <section id="contents">  <!-- class="container" -->
                <!-- front-picture -->
                <section id="picture">
                    <img id="frontImg" src="banner1.jpeg" alt="banner1" class="w-100 h-100">
                </section>
                <!-- reservation part -->
                <section id="reservePart" class="d-flex">
                    <!-- live reserve -->
                    <article id="reserveNow" class="col-4 d-flex align-items-center justify-content-center">
                        <div>
                            <a href="#" class="reserve-now text-light font-weight-light">실시간<br>예약하기</a>
                        </div>
                    </article>
                    <!-- check reservstion -->
                    <article id="checkReservation" class="col-5">
                        <div class="text-white m-4">
                            <span class="mr-4 check-reserve">예약 확인</span>
                            <label>회원<input type="radio" id="member" name="isMember" value="member" class="mr-3" checked></label>
                            <label>비회원<input type="radio" id="notMember" name="isMember" value="notMember"><br></label>
                            
                            <!-- 회원 -->
                            <div id="memberReserve">
                                <div class="d-flex mt-4">
                                    <span class="w-25 mt-2 pl-3">아이디:</span>
                                    <input type="text" id="userId" class="form-control">
                                </div>
                                <div class="d-flex mt-4">
                                    <span class="w-25 mt-2 pl-3">비밀 번호:</span>
                                    <input type="password" id="userPwd" class="form-control">
                                </div>
                                <div class="d-flex justify-content-end">
                                    <button type="button" class="btn btn-info mt-4 submit-btn">조회하기</button>
                                </div>
                            </div>
                            
                            <!-- 비회원 -->
                            <div id="notMemberReserve" class="d-none">
                                <div class="d-flex mt-4">
                                    <span class="w-25 mt-2 pl-3">이름:</span>
                                    <input type="text" id="userName" class="form-control">
                                </div>
                                <div class="d-flex mt-4">
                                    <span class="w-25 mt-2 pl-3">전화번호:</span>
                                    <input type="text" id="userPhoneNumber" class="form-control" onkeyup="this.value=this.value.replace(/[^-0-9]/g,'');"/>
                                </div>
                                <div class="d-flex mt-4">
                                    <span class="w-25 mt-2 pl-3">날짜:</span>
                                    <input type="text" id="reserveDate" class="form-control">
                                </div>
                                <div class="d-flex justify-content-end">
                                    <button type="button" class="btn btn-info mt-4 submit-btn">조회하기</button>
                                </div>
                            </div>
                        </div>
                    </article>
                    <!-- reserve call -->
                    <article id="reserveCall" class="col-3">
                        <div class="d-flex justify-content-center align-items-center h-100">
                            <div class="text-white">
                                <h4>예약 문의:<h4>
                                <h1>010-<br>000-1111</h1>
                            </div>
                        </div>
                    </article>
                </section>
            </section>
            <!-- footer -->
            <footer>
                <address class="d-flex align-items-center h-100">
                    <div class="copyright ml-4">제주특별자치도 제주시 애월읍<br>
                    사업자등록번호: 111-22-255222 / 농어촌민박사업자지정 / 대표: 김퉁목<br>
                    Copyright 2025 tongnamu All right reserved
                </div>
                </address>
            </footer>

        </div>

        <!-- script part -->
        <script>
            $(document).ready(function(e) {
                // 2. 라디오 버튼 이벤트
                $('input[name=isMember]').on('change', function(e) {
                    let isMember = $(this).val(); // 지금 체인지가 일어난(체크카 된) input의 value

                    if (isMember == 'notMember') {
                        $('#memberReserve').addClass('d-none');
                        $('#notMemberReserve').removeClass('d-none');
                    } else {
                        $('#notMemberReserve').addClass('d-none');
                        $('#memberReserve').removeClass('d-none');
                    }
                });

                // 날짜 영역에 데이트피커
                $('#reserveDate').datepicker ({
                    dayNamesMin: ['일', '월', '화', '수', '목', '금', '토']
                    , minDate: 0 // 오늘 날짜 이후 선택
                    , dateFormat: "yy년 mm월 dd일" // 2021년 00월 00일
                    , showButtonPanel: true
                });

                // 3. 유효성 체크 
                // teacher's (button)
                // 변수는 최대한 범위 안에서만 선택해서 사용할것..!
                $('.submit-btn').on('click', function(e) {
                    let radioValue = $('input[name=isMember]:checked').val(); // 라디오 버튼 중 선택된 value
                    
                    if (radioValue == 'member') {
                        // 회원 선택
                        let userId = $('#userId').val().trim();
                        if (userId.length < 1) {
                            alert("아이디를 입력해주세요.");
                            return;
                        }

                        let userPwd = $('#userPwd').val();
                        if (userPwd == '') {
                            alert("비밀번호를 입력해주세요.");
                            return;
                        }
                    } else {
                        // 비회원 선택
                        let userName = $('#userName').val().trim();
                        let userPhoneNumber = $('#userPhoneNumber').val().trim();
                        let reserveDate = $('#reserveDate').val().trim();

                        if (userName == '') {
                            alert("이름을 입력해주세요.");
                            return;
                        }

                        if (userPhoneNumber == '') {
                            alert("전화번호를 입력하세요.");
                            return;
                        }

                        if (reserveDate == '') {
                            alert("날짜를 선택해주세요.");
                            return;
                        }

                        // 010
                        // substring이나 slice 이용하여 짤라서도 사용가능
                        if (userPhoneNumber.startsWith('010') == false) {
                            alert("010으로 시작한 번호만 입력 가능합니다.");
                            return;
                        }
                    }

                    
                });

                // 4. 이미지 3초 간격 변경
                // setInterval / frontImg
                let imgArr = ['banner1.jpeg', 'banner2.jpeg', 'banner3.jpeg', 'banner4.jpeg'];
                let imgIndex = 0;
                
                // 파라미터 안에 바로 함수를 넣어도 된다!
                setInterval(function(e) {
                    imgIndex++;
                    if (imgIndex > imgArr.length - 1) {
                        imgIndex = 0;
                    }
                    $('#frontImg').attr('src', imgArr[imgIndex]);
                }, '3000'); // 3초에 한번씩 수행 (들어갈 함수, millisec)


            });

        </script>
    </body>
</html>